<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VichiFlix</title>
<link rel="stylesheet" href="styles.css" />
</head>
<body>
<!-- ğŸ” LOCKSCREEN -->
<div id="lockscreen">
<h2>Area riservata<br />Inserisci la password</h2>
<input type="password" id="passInput" placeholder="Password" />
<button id="passBtn">Entra</button>
<button id="devBypassBtn" style="display:none;margin-top:8px">Bypass (dev)</button>
</div>


<!-- ğŸŒŸ APP -->
<div class="app" style="display: none">
<header class="main-header">
<div class="brand" id="brandLogo">
<img src="https://i.imgur.com/eVHJA5V.png" alt="VichiFlix Logo" class="logo-img" />
</div>
</header>

<!-- WATCH-TOGETHER -->
<section class="together" aria-label="Guarda insieme">
<div class="tog-row">
<button id="togOpen" class="btn">ğŸ‘¥ Guarda insieme</button>
<div id="togStatus" class="tog-status" style="display:none"></div>
</div>


<dialog id="togDialog">
<form method="dialog" class="tog-form">
<h3>Guarda insieme</h3>
<p class="muted">Crea una stanza o entra con un codice/link condiviso.</p>


<div class="split">
<div>
<label class="lbl">Crea stanza</label>
<div class="row">
<input id="togCode" class="inp" type="text" maxlength="8" placeholder="ABCD1234" />
<button id="togMake" class="btn primary" type="button">Crea</button>
</div>
<div class="row">
<input id="togLink" class="inp" type="text" readonly placeholder="Link stanza" />
<button id="togCopy" class="btn" type="button">Copia link</button>
</div>
</div>
<div>
<label class="lbl">Entra in stanza</label>
<div class="row">
<input id="togJoinCode" class="inp" type="text" maxlength="8" placeholder="Codice stanza" />
<button id="togJoin" class="btn" type="button">Entra</button>
</div>
</div>
</div>


<div class="tog-foot">
<button id="togLeave" class="btn danger" type="button" style="display:none">Lascia stanza</button>
<button class="btn" value="cancel">Chiudi</button>
</div>
</form>
</dialog>
</section>


<section id="home" aria-label="Catalogo serie">
<h2 class="subtitle">Scegli una serie</h2>
<div id="grid" class="grid"></div>
</section>


<section id="watch" class="watch" aria-label="Dettaglio serie">
<div class="tabs">
<button id="tabList" class="tab active">Elenco episodi</button>
<button class="btn" id="backBtn">â† Torna ai poster</button>
</div>


<div class="container" id="listView">
<div class="episodes-wrap">
<div class="episodes-head">
<strong id="seriesTitle">Titolo</strong>
<div id="resumeBox" class="resume-box" style="display:none">
<span id="resumeText" class="resume-text"></span>
<button id="resumeBtn" class="btn primary">Riprendi</button>
</div>
<div class="block-selector">
<label id="blockLabel" for="blockSelect">Blocchi da 100:</label>
<select id="blockSelect" class="btn block-select"></select>
</div>
</div>
<div id="episodesGrid" class="episodes-grid"></div>
<div class="pagination">
<button class="pager" id="prevPage" aria-label="Pagina precedente">â—€ï¸ Pagina</button>
<span class="page-badge" id="pageBadge">1 / 1</span>
<button class="pager" id="nextPage" aria-label="Pagina successiva">Pagina â–¶ï¸</button>
</div>
</div>
</div>


<div class="container" id="playerView" style="display:none">
<div class="player">
<div class="player-head">
<div>
<div class="player-title" id="nowTitle">Titolo</div>
<div id="nowInfo" class="now-info"></div>
</div>
<div class="player-controls">
<button class="btn" id="prevEp">â—€ï¸ Precedente</button>
<button class="btn primary" id="nextEp">Successiva â–¶ï¸</button>
</div>
</div>
<video id="video" controls autoplay controlslist="nodownload">
<source id="episode" type="video/mp4" src="" />
</video>
</div>
</div>
</section>


<footer class="app-footer">VichiFlix â€” protetto da password tramite Netlify Function ğŸ”’</footer>
</div>

<script>
window.VICHIFLIX_WS_URL = 'ws://localhost:8081'; // es. 'wss://vichiflix-ws.onrender.com/ws'
</script>
<script defer src="app.js"></script>
</body>
</html>